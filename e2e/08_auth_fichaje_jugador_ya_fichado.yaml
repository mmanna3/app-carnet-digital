appId: com.blueservant.edefi
---
# ⚠️  CONFLICTO CON BACKEND REAL: este test usa DNI 87654321, el mismo que el test 02
# (fichaje anónimo jugador ya fichado). Cuando se corre el suite completo, el test 02
# ficha a ese jugador en el equipo 1 como Pendiente, y este test falla con "El jugador
# ya está fichado en el equipo". Con el mock server no hay problema porque el servidor
# es stateless.
# Solución: usar un DNI distinto en este test (seeded como Activo en equipo 2 pero no
# en equipo 1), y actualizar la lógica smart del mock server para el nuevo DNI.
#
# Flujo: login → seleccionar equipo → menú "Fichar jugadores" →
# card ya fichado (verde) → DNI → confirmación
#
# El equipo ya está en el store (delegado autenticado), no hay paso de código equipo.
# DNI 87654321: mock devuelve true en el-dni-esta-fichado → flujo ya-fichado.
- launchApp:
    clearState: true
- waitForAnimationToEnd
- tapOn:
    id: 'card-delegados'
# PantallaLogin
- assertVisible:
    id: 'pantalla-login'
- tapOn:
    id: 'input-usuario'
- inputText: 'delegado-e2e'
- tapOn:
    id: 'input-password'
- inputText: 'password123'
- runFlow:
    when:
      platform: android
    commands:
      - hideKeyboard
- extendedWaitUntil:
    visible:
      id: 'boton-iniciar-sesion'
      enabled: true
- tapOn:
    id: 'boton-iniciar-sesion'
# PantallaSeleccionEquipo
- assertVisible:
    id: 'pantalla-seleccion-equipo'
- tapOn:
    id: 'item-equipo-1'
# Tab Mis Jugadores — abrir menú
- assertVisible:
    id: 'pantalla-mis-jugadores'
- tapOn:
    id: 'boton-menu-principal'
- tapOn:
    id: 'menu-item-fichar-jugadores'
# PantallaIntroDelegado
- assertVisible:
    id: 'pantalla-intro-delegado'
- tapOn:
    id: 'card-ya-fichado'
# PasoDni (paso 1 de 2)
- assertVisible:
    id: 'paso-dni'
- tapOn:
    id: 'input-dni'
- inputText: '87654321'
- runFlow:
    when:
      platform: android
    commands:
      - hideKeyboard
- extendedWaitUntil:
    visible:
      id: 'boton-continuar'
      enabled: true
- tapOn:
    id: 'boton-continuar'
# PantallaConfirmacion
- assertVisible:
    id: 'pantalla-confirmacion'
