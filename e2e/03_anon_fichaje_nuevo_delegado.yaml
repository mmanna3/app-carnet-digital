appId: com.blueservant.edefi
---
# Flujo completo "nuevo delegado" (azul): login → No estoy registrado → intro →
# código club → datos → foto → fotos DNI → confirmación → completado
#
# DNI 12345678: el mock devuelve false en el-dni-esta-fichado → validarDniNuevo pasa OK.
- launchApp:
    clearState: true
- waitForAnimationToEnd
- tapOn:
    id: 'card-delegados'
# PantallaLogin
- assertVisible:
    id: 'pantalla-login'
- tapOn:
    id: 'boton-no-registrado'
# PantallaIntroDelegado
- assertVisible:
    id: 'pantalla-intro-delegado'
- tapOn:
    id: 'card-nuevo-delegado'
# PasoCodigoClub (paso 1 de 5)
- assertVisible:
    id: 'paso-codigo-club'
- tapOn:
    id: 'input-codigo-club'
- inputText: 'MTD0001'
- tapOn:
    id: 'titulo-codigo-club'
- extendedWaitUntil:
    visible:
      id: 'boton-validar-club'
      enabled: true
- tapOn:
    id: 'boton-validar-club'
# PasoDatosDelegado (paso 2 de 5)
- assertVisible:
    id: 'paso-datos-delegado'
- tapOn:
    id: 'input-nombre-delegado'
- inputText: 'Juan'
- tapOn:
    id: 'input-apellido-delegado'
- inputText: 'Perez'
- tapOn:
    id: 'input-dni-delegado'
- inputText: '12345678'
- runFlow:
    when:
      platform: android
    commands:
      - hideKeyboard
- tapOn:
    id: 'input-fecha-nacimiento-delegado'
# Confirmar fecha: iOS usa botón "Listo", Android usa "OK" del picker nativo
- runFlow:
    when:
      platform: ios
    commands:
      - tapOn:
          id: 'boton-fecha-listo'
- runFlow:
    when:
      platform: android
    commands:
      - tapOn:
          text: 'OK'
          optional: true
      - tapOn:
          text: 'Aceptar'
          optional: true
- tapOn:
    id: 'input-email-delegado'
- inputText: 'juan.perez@ejemplo.com'
- runFlow:
    when:
      platform: android
    commands:
      - hideKeyboard
- tapOn:
    id: 'input-celular-delegado'
- inputText: '1123456789'
- runFlow:
    when:
      platform: android
    commands:
      - hideKeyboard
- extendedWaitUntil:
    visible:
      id: 'boton-continuar-datos'
      enabled: true
- tapOn:
    id: 'boton-continuar-datos'
# PasoFotoDelegado (paso 3 de 5) — seleccionar foto desde galería
- assertVisible:
    id: 'paso-foto-delegado'
- tapOn:
    id: 'boton-seleccionar-foto-delegado'
- tapOn: 'Elegir de galería'
- runFlow:
    when:
      platform: ios
    commands:
      - tapOn:
          text: 'Photo, .*'
          index: 0
          optional: true
      - tapOn:
          id: 'PXGGridLayout-Info'
          index: 0
          optional: true
- runFlow:
    when:
      platform: android
    commands:
      - tapOn:
          id: 'com.google.android.providers.media.module:id/icon_thumbnail'
          optional: true
      - tapOn:
          id: 'com.google.android.documentsui:id/thumbnail'
          optional: true
- extendedWaitUntil:
    visible:
      id: 'boton-subir-foto-delegado'
      enabled: true
- tapOn:
    id: 'boton-subir-foto-delegado'
# PasoFotosDniDelegado (paso 4 de 5) — frente y dorso desde galería
- assertVisible:
    id: 'paso-fotos-dni-delegado'
- tapOn:
    id: 'boton-seleccionar-frente-delegado'
- tapOn: 'Elegir de galería'
- runFlow:
    when:
      platform: ios
    commands:
      - tapOn:
          text: 'Photo, .*'
          index: 0
          optional: true
      - tapOn:
          id: 'PXGGridLayout-Info'
          index: 0
          optional: true
- runFlow:
    when:
      platform: android
    commands:
      - tapOn:
          id: 'com.google.android.providers.media.module:id/icon_thumbnail'
          optional: true
      - tapOn:
          id: 'com.google.android.documentsui:id/thumbnail'
          optional: true
- tapOn:
    id: 'boton-seleccionar-dorso-delegado'
- tapOn: 'Elegir de galería'
- runFlow:
    when:
      platform: ios
    commands:
      - tapOn:
          text: 'Photo, .*'
          index: 0
          optional: true
      - tapOn:
          id: 'PXGGridLayout-Info'
          index: 0
          optional: true
- runFlow:
    when:
      platform: android
    commands:
      - tapOn:
          id: 'com.google.android.providers.media.module:id/icon_thumbnail'
          optional: true
      - tapOn:
          id: 'com.google.android.documentsui:id/thumbnail'
          optional: true
- extendedWaitUntil:
    visible:
      id: 'boton-subir-dni-delegado'
      enabled: true
- tapOn:
    id: 'boton-subir-dni-delegado'
# PasoConfirmacionDelegado (paso 5 de 5) → POST /api/Delegado al mock server
- assertVisible:
    id: 'paso-confirmacion-delegado'
- extendedWaitUntil:
    visible:
      id: 'boton-enviar-delegado'
      enabled: true
- tapOn:
    id: 'boton-enviar-delegado'
# PantallaCompletado
- assertVisible:
    id: 'pantalla-completado-delegado'
