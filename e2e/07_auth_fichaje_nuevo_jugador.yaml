appId: com.blueservant.edefi
---
# Flujo: login → seleccionar equipo → menú "Fichar jugadores" →
# card nuevo (azul) → datos → foto → fotos DNI → autorización → confirmación
#
# El equipo ya está en el store (delegado autenticado), no hay paso de código equipo.
# DNI 12345678: mock devuelve false en el-dni-esta-fichado.
- launchApp:
    clearState: true
- waitForAnimationToEnd
- tapOn:
    id: 'card-delegados'
# PantallaLogin
- assertVisible:
    id: 'pantalla-login'
- tapOn:
    id: 'input-usuario'
- inputText: 'delegado-e2e'
- tapOn:
    id: 'input-password'
- inputText: 'password123'
- runFlow:
    when:
      platform: android
    commands:
      - hideKeyboard
- extendedWaitUntil:
    visible:
      id: 'boton-iniciar-sesion'
      enabled: true
- tapOn:
    id: 'boton-iniciar-sesion'
# PantallaSeleccionEquipo
- assertVisible:
    id: 'pantalla-seleccion-equipo'
- tapOn:
    id: 'item-equipo-1'
# Tab Mis Jugadores — abrir menú
- assertVisible:
    id: 'pantalla-mis-jugadores'
- tapOn:
    id: 'boton-menu-principal'
- tapOn:
    id: 'menu-item-fichar-jugadores'
# PantallaIntroDelegado
- assertVisible:
    id: 'pantalla-intro-delegado'
- tapOn:
    id: 'card-nuevo'
# PasoDatosJugador (paso 1 de 4)
- assertVisible:
    id: 'paso-datos-jugador'
- tapOn:
    id: 'input-nombre'
- inputText: 'Juan'
- tapOn:
    id: 'input-apellido'
- inputText: 'Perez'
- tapOn:
    id: 'input-dni-jugador'
- inputText: '12345678'
- tapOn:
    id: 'input-fecha-nacimiento'
- runFlow:
    when:
      platform: ios
    commands:
      - tapOn:
          id: 'boton-fecha-listo'
- runFlow:
    when:
      platform: android
    commands:
      - tapOn:
          text: 'OK'
          optional: true
      - tapOn:
          text: 'Aceptar'
          optional: true
- extendedWaitUntil:
    visible:
      id: 'boton-continuar'
      enabled: true
- tapOn:
    id: 'boton-continuar'
# PasoFoto (paso 2 de 4)
- assertVisible:
    id: 'paso-foto'
- tapOn:
    id: 'boton-seleccionar-foto'
- tapOn: 'Elegir de galería'
- runFlow:
    when:
      platform: ios
    commands:
      - tapOn:
          text: 'Photo, .*'
          index: 0
          optional: true
      - tapOn:
          id: 'PXGGridLayout-Info'
          index: 0
          optional: true
- runFlow:
    when:
      platform: android
    commands:
      - tapOn:
          id: 'com.google.android.providers.media.module:id/icon_thumbnail'
          optional: true
      - tapOn:
          id: 'com.google.android.documentsui:id/thumbnail'
          optional: true
- extendedWaitUntil:
    visible:
      id: 'boton-subir-foto'
      enabled: true
- tapOn:
    id: 'boton-subir-foto'
# PasoFotosDni (paso 3 de 4)
- assertVisible:
    id: 'paso-fotos-dni'
- tapOn:
    id: 'boton-seleccionar-frente'
- tapOn: 'Elegir de galería'
- runFlow:
    when:
      platform: ios
    commands:
      - tapOn:
          text: 'Photo, .*'
          index: 0
          optional: true
      - tapOn:
          id: 'PXGGridLayout-Info'
          index: 0
          optional: true
- runFlow:
    when:
      platform: android
    commands:
      - tapOn:
          id: 'com.google.android.providers.media.module:id/icon_thumbnail'
          optional: true
      - tapOn:
          id: 'com.google.android.documentsui:id/thumbnail'
          optional: true
- tapOn:
    id: 'boton-seleccionar-dorso'
- tapOn: 'Elegir de galería'
- runFlow:
    when:
      platform: ios
    commands:
      - tapOn:
          text: 'Photo, .*'
          index: 0
          optional: true
      - tapOn:
          id: 'PXGGridLayout-Info'
          index: 0
          optional: true
- runFlow:
    when:
      platform: android
    commands:
      - tapOn:
          id: 'com.google.android.providers.media.module:id/icon_thumbnail'
          optional: true
      - tapOn:
          id: 'com.google.android.documentsui:id/thumbnail'
          optional: true
- extendedWaitUntil:
    visible:
      id: 'boton-subir-dni'
      enabled: true
- tapOn:
    id: 'boton-subir-dni'
# PasoAutorizacion (paso 4 de 4) → POST /api/Jugador al mock server
- assertVisible:
    id: 'paso-autorizacion'
- tapOn:
    id: 'boton-enviar'
# PantallaConfirmacion
- assertVisible:
    id: 'pantalla-confirmacion'
